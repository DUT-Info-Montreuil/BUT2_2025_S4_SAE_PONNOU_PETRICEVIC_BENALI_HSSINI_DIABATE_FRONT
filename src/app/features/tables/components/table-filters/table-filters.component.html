<div class="absolute mt-1 bg-white border border-gray-200 rounded-md shadow-md w-64 z-10 p-3 max-h-64 overflow-y-auto">
  <form [formGroup]="filterForm" (ngSubmit)="onSubmit()">
    @for (filter of filters; track filter.key) {
    <div class="block w-full text-left mb-3">
      <label class="block text-sm font-medium text-gray-700 mb-1">{{ filter.label }}</label>

      @switch (filter.type) {
        @case ('text') {
          <input type="text" [formControlName]="filter.key" placeholder="Rechercher..."
                 class="w-full border rounded-md p-1 text-sm">
        }
        @case ('number') {
          <div class="flex gap-2">
            <select [formControlName]="filter.key + '_operator'" class="border rounded-md p-1 text-sm">
              <option value="eq">=</option>
              <option value="gt">></option>
              <option value="lt"><</option>
              <option value="gte">>=</option>
              <option value="lte"><=</option>
              <option value="ne">≠</option>
            </select>
            <input type="number" [formControlName]="filter.key" placeholder="Valeur"
                   class="flex-1 border rounded-md p-1 text-sm">
          </div>
        }
        @case ('date') {
          <input type="date" [formControlName]="filter.key"
                 class="w-full border rounded-md p-1 text-sm">
        }
        @case ('boolean') {
          <div class="flex items-center">
            <input type="checkbox" [formControlName]="filter.key" class="mr-2">
            <span>Oui/Non</span>
          </div>
        }
      }
    </div>
    }
    <div class="flex justify-between mt-2">
      <button type="button" (click)="onReset()"
              class="bg-gray-100 text-gray-700 px-3 py-1 rounded-md text-sm hover:bg-gray-200 transition-colors">
        Réinitialiser
      </button>
      <button type="submit"
              class="bg-blue-500 text-white px-3 py-1 rounded-md text-sm hover:bg-blue-600 transition-colors">
        Appliquer
      </button>
    </div>
  </form>
</div>
